SETTING UP THE SPRIG SHCEDULAR AND SPRING MAIL

üß© Step 1 ‚Äî Understand the Concepts
üïí Spring Scheduler

Spring Scheduler allows you to run tasks automatically at fixed intervals or specific times ‚Äî without any user action.
Example use cases:
Sending daily follow-up reminders
Cleaning up expired applications
Generating daily reports
In simple terms: it‚Äôs like setting a cron job inside your Spring app.

üìß Spring Mail
Spring Mail (built on Jakarta Mail) allows your application to send emails programmatically.
You‚Äôll configure it with an email service (like Gmail, Outlook, etc.) and use it to send notifications.

----------------------------------------------------------------------------------------------------------------------------------

üß± Step 2 ‚Äî Add Dependencies
In your pom.xml, add these dependencies:

<!-- Spring Boot Starter Mail -->
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-mail</artifactId>
</dependency>

<!-- Spring Boot Starter for Scheduling -->
<dependency>
    <groupId>org.springframework.boot</artifactId>
    <artifactId>spring-boot-starter</artifactId>
</dependency>
‚úÖ Note: spring-boot-starter (it includes scheduling core).

----------------------------------------------------------------------------------------------------------------------------------

‚öôÔ∏è Step 3 ‚Äî Enable Scheduling

In your main Spring Boot application class (the one annotated with @SpringBootApplication),
add this line above the class: @EnableScheduling

@SpringBootApplication
@EnableScheduling
public class JobTrackerApplication {
    public static void main(String[] args) {
        SpringApplication.run(JobTrackerApplication.class, args);
    }
}
This tells Spring Boot to scan for and run any @Scheduled tasks automatically.

----------------------------------------------------------------------------------------------------------------------------------

üßæ Step 4 ‚Äî Configure Email Settings
In your application.properties (or application.yml), add:
# =======================
# SPRING MAIL CONFIGURATION
# =======================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=your_email@gmail.com
spring.mail.password=your_app_password
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# App info (optional)
app.mail.from=your_email@gmail.com


‚ö†Ô∏è Important:
Gmail no longer allows normal password-based access.
You must generate an App Password in your Google Account settings.
Go to: https://myaccount.google.com/security
Turn on 2-Step Verification
Generate an App Password (choose "Mail" ‚Üí "Other (Custom name)" ‚Üí e.g., ‚ÄúJobTrackerApp‚Äù)
Use that app password here instead of your normal password.

----------------------------------------------------------------------------------------------------------------------------------

üìÆ Step 5 ‚Äî Create an Email Service
Create a new class: com.spring.boot.job.tracker.app.service.EmailService.java

package com.spring.boot.job.tracker.app.service;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.mail.SimpleMailMessage;
import org.springframework.mail.javamail.JavaMailSender;
import org.springframework.stereotype.Service;

@Service
public class EmailService {

    private final JavaMailSender mailSender;

    @Value("${app.mail.from}")
    private String fromEmail;

    public EmailService(JavaMailSender mailSender) {
        this.mailSender = mailSender;
    }

    public void sendEmail(String to, String subject, String text) {
        SimpleMailMessage message = new SimpleMailMessage();
        message.setFrom(fromEmail);
        message.setTo(to);
        message.setSubject(subject);
        message.setText(text);
        mailSender.send(message);
    }
}


‚úÖ This reusable service can send any kind of email.

----------------------------------------------------------------------------------------------------------------------------------

‚è∞ Step 6 ‚Äî Create a Scheduled Task

Create a new class: com.spring.boot.job.tracker.app.scheduler.FollowUpScheduler.java

package com.spring.boot.job.tracker.app.scheduler;

import com.spring.boot.job.tracker.app.service.EmailService;
import org.springframework.scheduling.annotation.Scheduled;
import org.springframework.stereotype.Component;

@Component
public class FollowUpScheduler {

    private final EmailService emailService;

    public FollowUpScheduler(EmailService emailService) {
        this.emailService = emailService;
    }

    // Runs every day at 9 AM
    @Scheduled(cron = "0 0 9 * * ?")
    public void sendFollowUpReminders() {
        // For now, just simulate
        System.out.println("üìÖ Checking for follow-up reminders...");

        // Example email (you will later fetch data from DB)
        String to = "user@example.com";
        String subject = "Job Application Follow-Up Reminder";
        String text = "Hi! Don‚Äôt forget to follow up on your Google Backend Engineer application today.";
        emailService.sendEmail(to, subject, text);

        System.out.println("‚úÖ Reminder email sent successfully.");
    }
}

}

‚úÖ This task runs daily at 9:00 AM, checks for reminders (you‚Äôll add DB logic later), and sends an email.


----------------------------------------------------------------------------------------------------------------------------------

üß† Step 7 ‚Äî Verify

1. Start your Spring Boot app.
2. Watch the console ‚Äî every morning (or manually trigger cron for testing) you should see:
üìÖ Checking for follow-up reminders...
‚úÖ Reminder email sent successfully.

3. Check your Gmail inbox (for the recipient address).
You‚Äôll see the test reminder email.

----------------------------------------------------------------------------------------------------------------------------------

‚úÖ Step 8 ‚Äî (Later) Connect It with Database

When ready, you can make the scheduler:
Fetch users whose followUpDate equals today‚Äôs date.
Send reminders to only those users.
That query could look like: List<JobApplication> dueApplications = jobApplicationRepository.findByFollowUpDate(LocalDate.now());

Then loop through and call: emailService.sendEmail(user.getEmail(), subject, text);





